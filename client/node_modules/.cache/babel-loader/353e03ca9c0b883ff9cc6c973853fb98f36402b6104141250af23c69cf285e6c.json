{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from'axios';import{URL}from\"../config\";import Navbar from\"../components/Navbar\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState({email:\"\",password:\"\",password2:\"\"}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(URL,\"/users/register\"),{email:form.email,password:form.password,password2:form.password2});case 4:res=_context.sent;setMessage(res.data.message);if(res.data.ok){setTimeout(function(){props.login();},1500);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.info(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setTimeout(function(){setMessage('');},2000);},[message]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"form\",{onChange:handleChange,onSubmit:handleSubmit,className:\"form_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email or Phone number\",name:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm Passsword\",name:\"password2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"message\",children:message}),/*#__PURE__*/_jsx(\"button\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account?\",/*#__PURE__*/_jsx(Link,{className:\"formlink\",exact:\"true\",to:\"/login\",children:\"Log in\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","URL","Navbar","Link","Register","props","message","setMessage","email","password","password2","form","setForm","handleChange","e","target","name","value","handleSubmit","preventDefault","post","res","data","ok","setTimeout","login","console","info"],"sources":["/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/src/views/Register.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport { URL } from \"../config\";\nimport Navbar from \"../components/Navbar\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Register(props) {\n  const[message,setMessage]=useState('')\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n    password2: \"\",\n  });\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n    try {\n      const res=await axios.post(`${URL}/users/register`,{\n        email:form.email,\n        password:form.password,\n        password2:form.password2\n      })\n      setMessage(res.data.message);\n      if(res.data.ok){\n        setTimeout(()=>{\n          props.login()\n        },1500)\n      }\n    } catch (err) {\n      console.info(err);\n    }\n  };\n  useEffect(()=>{\n    setTimeout(()=>{\n      setMessage('')\n    },2000)\n  },[message])\n  return (\n    <div className=\"home\">\n    <Navbar />\n    <form\n      onChange={handleChange}\n      onSubmit={handleSubmit}\n      className=\"form_container\"\n    >\n        <h1>Register</h1>\n\n      <input type=\"email\" placeholder=\"Email or Phone number\" name=\"email\" />\n\n      <input type=\"password\" placeholder=\"Password\" name=\"password\" />\n\n      <input type=\"password\" placeholder=\"Confirm Passsword\" name=\"password2\" />\n      <h4 className=\"message\">{message}</h4>\n\n      <button>Register</button>\n      <p>\n          Already have an account?\n        <Link className=\"formlink\" exact='true' to='/login' >Log in</Link>\n        </p>\n    </form>\n    </div>\n  );\n}\n"],"mappings":"mxBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,GAAG,KAAQ,WAAW,CAC/B,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAASC,IAAI,KAAQ,kBAAkB,CAAC,wFAExC,cAAe,SAASC,SAAQ,CAACC,KAAK,CAAE,CACtC,cAA0BN,QAAQ,CAAC,EAAE,CAAC,wCAAhCO,OAAO,eAACC,UAAU,eACxB,eAAwBR,QAAQ,CAAC,CAC/BS,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EAAE,CACZC,SAAS,CAAE,EACb,CAAC,CAAC,yCAJKC,IAAI,eAAEC,OAAO,eAKpB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BF,OAAO,gCAAMD,IAAI,wBAAGG,CAAC,CAACC,MAAM,CAACC,IAAI,CAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,GAAG,CACvD,CAAC,CACD,GAAMC,aAAY,4FAAG,iBAAMJ,CAAC,4HAC1BA,CAAC,CAACK,cAAc,EAAE,CAAC,sCAEDnB,MAAK,CAACoB,IAAI,WAAInB,GAAG,oBAAkB,CACjDO,KAAK,CAACG,IAAI,CAACH,KAAK,CAChBC,QAAQ,CAACE,IAAI,CAACF,QAAQ,CACtBC,SAAS,CAACC,IAAI,CAACD,SACjB,CAAC,CAAC,QAJIW,GAAG,eAKTd,UAAU,CAACc,GAAG,CAACC,IAAI,CAAChB,OAAO,CAAC,CAC5B,GAAGe,GAAG,CAACC,IAAI,CAACC,EAAE,CAAC,CACbC,UAAU,CAAC,UAAI,CACbnB,KAAK,CAACoB,KAAK,EAAE,CACf,CAAC,CAAC,IAAI,CAAC,CACT,CAAC,+EAEDC,OAAO,CAACC,IAAI,aAAK,CAAC,oEAErB,kBAjBKT,aAAY,4CAiBjB,CACDpB,SAAS,CAAC,UAAI,CACZ0B,UAAU,CAAC,UAAI,CACbjB,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAAC,IAAI,CAAC,CACT,CAAC,CAAC,CAACD,OAAO,CAAC,CAAC,CACZ,mBACE,aAAK,SAAS,CAAC,MAAM,wBACrB,KAAC,MAAM,IAAG,cACV,cACE,QAAQ,CAAEO,YAAa,CACvB,QAAQ,CAAEK,YAAa,CACvB,SAAS,CAAC,gBAAgB,wBAExB,gCAAiB,cAEnB,cAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAO,EAAG,cAEvE,cAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAG,cAEhE,cAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,mBAAmB,CAAC,IAAI,CAAC,WAAW,EAAG,cAC1E,WAAI,SAAS,CAAC,SAAS,UAAEZ,OAAO,EAAM,cAEtC,oCAAyB,cACzB,6DAEE,KAAC,IAAI,EAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,oBAAe,GAC9D,GACD,GACD,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}