{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate}from\"react-router-dom\";// core version + navigation, pagination modules:\nimport Swiper from'swiper';// import Swiper and modules styles\nimport'swiper/css';import'swiper/css/navigation';import'swiper/css/pagination';import Login from\"./views/Login\";import Register from\"./views/Register\";import Secret from\"./views/Secret\";import{URL}from\"./config\";import axios from\"axios\";import Series from\"./views/Series\";import Movies from\"./views/Movies\";import Settings from\"./views/Settings\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){var swiper=new Swiper('.swiper',{// Optional parameters\ndirection:'vertical',loop:true,// If we need pagination\npagination:{el:'.swiper-pagination'},// Navigation arrows\nnavigation:{nextEl:'.swiper-button-next',prevEl:'.swiper-button-prev'},// And if we need scrollbar\nscrollbar:{el:'.swiper-scrollbar'}});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var token=JSON.parse(localStorage.getItem(\"token\"));useEffect(function(){var verify_token=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(token==null)){_context.next=2;break;}return _context.abrupt(\"return\",setIsLoggedIn(false));case 2:_context.prev=2;axios.defaults.headers.common[\"Authorization\"]=token;_context.next=6;return axios.post(\"\".concat(URL,\"/users/verify_token\"));case 6:res=_context.sent;return _context.abrupt(\"return\",res.data.ok?login(token):logout());case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.info(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function verify_token(){return _ref.apply(this,arguments);};}();verify_token();// eslint-disable-next-line\n},[]);var login=function login(token){token&&localStorage.setItem(\"token\",JSON.stringify(token));setIsLoggedIn(true);};var logout=function logout(){localStorage.removeItem(\"token\");setIsLoggedIn(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/browse\"}):/*#__PURE__*/_jsx(Login,{login:login})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/login\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/browse\"}):/*#__PURE__*/_jsx(Login,{login:login})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/register\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/browse\"}):/*#__PURE__*/_jsx(Register,{login:login})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/browse\",element:isLoggedIn?/*#__PURE__*/_jsx(Secret,{logout:logout}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/series\",element:isLoggedIn?/*#__PURE__*/_jsx(Series,{logout:logout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/movies\",element:isLoggedIn?/*#__PURE__*/_jsx(Movies,{logout:logout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{exact:\"true\",path:\"/settings\",element:isLoggedIn?/*#__PURE__*/_jsx(Settings,{logout:logout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})})});}","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Swiper","Login","Register","Secret","URL","axios","Series","Movies","Settings","App","swiper","direction","loop","pagination","el","navigation","nextEl","prevEl","scrollbar","isLoggedIn","setIsLoggedIn","token","JSON","parse","localStorage","getItem","verify_token","defaults","headers","common","post","res","data","ok","login","logout","console","info","setItem","stringify","removeItem"],"sources":["/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n} from \"react-router-dom\";\n\n // core version + navigation, pagination modules:\n import Swiper from 'swiper';\n // import Swiper and modules styles\n import 'swiper/css';\n import 'swiper/css/navigation';\n import 'swiper/css/pagination';\n\nimport Login from \"./views/Login\";\nimport Register from \"./views/Register\";\nimport Secret from \"./views/Secret\";\nimport { URL } from \"./config\";\nimport axios from \"axios\";\nimport Series from \"./views/Series\";\nimport Movies from \"./views/Movies\";\nimport Settings from \"./views/Settings\";\n\nexport default function App() {\n  const swiper = new Swiper('.swiper', {\n    // Optional parameters\n    direction: 'vertical',\n    loop: true,\n  \n    // If we need pagination\n    pagination: {\n      el: '.swiper-pagination',\n    },\n  \n    // Navigation arrows\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev',\n    },\n  \n    // And if we need scrollbar\n    scrollbar: {\n      el: '.swiper-scrollbar',\n    },\n  });\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const token = JSON.parse(localStorage.getItem(\"token\"));\n\n  useEffect(() => {\n    const verify_token = async () => {\n      if (token == null) return setIsLoggedIn(false);\n      try {\n        axios.defaults.headers.common[\"Authorization\"] = token;\n        const res = await axios.post(`${URL}/users/verify_token`);\n        return res.data.ok ? login(token) : logout();\n      } catch (e) {\n        console.info(e);\n      }\n    };\n    verify_token();\n    // eslint-disable-next-line\n  }, []);\n\n  const login = (token) => {\n    token && localStorage.setItem(\"token\", JSON.stringify(token));\n    setIsLoggedIn(true);\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setIsLoggedIn(false);\n  };\n  return (\n    <div className=\"App\">\n      <Router>\n        <Routes>\n          <Route\n            exact=\"true\"\n            path=\"/\"\n            element={isLoggedIn ? <Navigate to=\"/browse\" /> : <Login login={login} />}\n          />\n          <Route\n            exact=\"true\"\n            path=\"/login\"\n            element={\n              isLoggedIn ? <Navigate to=\"/browse\" /> : <Login login={login} />\n            }\n          />\n          <Route\n            exact=\"true\"\n            path=\"/register\"\n            element={\n              isLoggedIn ? (\n                <Navigate to=\"/browse\" />\n              ) : (\n                <Register login={login} />\n              )\n            }\n          />\n          <Route\n            exact=\"true\"\n            path=\"/browse\"\n            element={\n              isLoggedIn ? (\n                <Secret logout={logout}  />\n              ) : (\n                <Navigate to=\"/\" />\n              )\n            }\n          />\n          <Route\n            exact=\"true\"\n            path=\"/series\"\n            element={isLoggedIn ? <Series logout={logout} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            exact=\"true\"\n            path=\"/movies\"\n            element={isLoggedIn ? <Movies logout={logout} /> : <Navigate to=\"/login\" />}\n          />\n          <Route\n            exact=\"true\"\n            path=\"/settings\"\n            element={isLoggedIn ? <Settings logout={logout} /> : <Navigate to=\"/login\" />}\n          />\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}