{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from'axios';import{URL}from\"../config\";import Navbar from\"../components/Navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState({email:\"\",password:\"\"}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(URL,\"/users/login\"),{email:form.email,password:form.password});case 4:res=_context.sent;setMessage(res.data.message);if(res.data.ok){setTimeout(function(){props.login(res.data.token);},1500);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setTimeout(function(){setMessage('');},2000);},[message]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"form\",{onChange:handleChange,onSubmit:handleSubmit,className:\"form_container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",defaultValue:\"a@a.com\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",title:\"a\",name:\"password\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"message\",children:message})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","URL","Navbar","Login","props","message","setMessage","email","password","form","setForm","handleChange","e","target","name","value","handleSubmit","preventDefault","post","res","data","ok","setTimeout","login","token","console","log"],"sources":["/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/src/views/Login.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from 'axios';\nimport { URL } from \"../config\";\nimport Navbar from \"../components/Navbar\";\n\nexport default function Login(props) {\n  const[message,setMessage]=useState('')\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n    try {\n      const res=await axios.post(`${URL}/users/login`,{\n        email:form.email,\n        password:form.password,\n      })\n      setMessage(res.data.message);\n      if(res.data.ok){\n        setTimeout(()=>{\n          props.login(res.data.token)\n        },1500)\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(()=>{\n    setTimeout(()=>{\n      setMessage('')\n    },2000)\n  },[message])\n  return (\n    <>\n    <Navbar />\n    <form\n      onChange={handleChange}\n      onSubmit={handleSubmit}\n      className=\"form_container\"\n    >\n      <label>Email</label>\n      <input type=\"email\" defaultValue='a@a.com'  name=\"email\" />\n\n      <label>Password</label>\n      <input type=\"password\" title='a'  name=\"password\" />\n\n      <button>Login</button>\n      <h4 className=\"message\">{message}</h4>\n    </form>\n    </>\n  );\n}\n"],"mappings":"mxBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,GAAG,KAAQ,WAAW,CAC/B,MAAOC,OAAM,KAAM,sBAAsB,CAAC,6IAE1C,cAAe,SAASC,MAAK,CAACC,KAAK,CAAE,CACnC,cAA0BL,QAAQ,CAAC,EAAE,CAAC,wCAAhCM,OAAO,eAACC,UAAU,eACxB,eAAwBP,QAAQ,CAAC,CAC/BQ,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAAC,yCAHKC,IAAI,eAAEC,OAAO,eAIpB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BF,OAAO,gCAAMD,IAAI,wBAAGG,CAAC,CAACC,MAAM,CAACC,IAAI,CAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,GAAG,CACvD,CAAC,CACD,GAAMC,aAAY,4FAAG,iBAAMJ,CAAC,4HAC1BA,CAAC,CAACK,cAAc,EAAE,CAAC,sCAEDjB,MAAK,CAACkB,IAAI,WAAIjB,GAAG,iBAAe,CAC9CM,KAAK,CAACE,IAAI,CAACF,KAAK,CAChBC,QAAQ,CAACC,IAAI,CAACD,QAChB,CAAC,CAAC,QAHIW,GAAG,eAITb,UAAU,CAACa,GAAG,CAACC,IAAI,CAACf,OAAO,CAAC,CAC5B,GAAGc,GAAG,CAACC,IAAI,CAACC,EAAE,CAAC,CACbC,UAAU,CAAC,UAAI,CACblB,KAAK,CAACmB,KAAK,CAACJ,GAAG,CAACC,IAAI,CAACI,KAAK,CAAC,CAC7B,CAAC,CAAC,IAAI,CAAC,CACT,CAAC,+EAEDC,OAAO,CAACC,GAAG,aAAK,CAAC,oEAEpB,kBAhBKV,aAAY,4CAgBjB,CACDlB,SAAS,CAAC,UAAI,CACZwB,UAAU,CAAC,UAAI,CACbhB,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAAC,IAAI,CAAC,CACT,CAAC,CAAC,CAACD,OAAO,CAAC,CAAC,CACZ,mBACE,wCACA,KAAC,MAAM,IAAG,cACV,cACE,QAAQ,CAAEM,YAAa,CACvB,QAAQ,CAAEK,YAAa,CACvB,SAAS,CAAC,gBAAgB,wBAE1B,gCAAoB,cACpB,cAAO,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,SAAS,CAAE,IAAI,CAAC,OAAO,EAAG,cAE3D,mCAAuB,cACvB,cAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAE,IAAI,CAAC,UAAU,EAAG,cAEpD,iCAAsB,cACtB,WAAI,SAAS,CAAC,SAAS,UAAEX,OAAO,EAAM,GACjC,GACJ,CAEP"},"metadata":{},"sourceType":"module","externalDependencies":[]}