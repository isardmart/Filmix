{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{URL}from\"../config\";import Hello from\"./Hello\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InitialForm(_ref){var login=_ref.login;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),hello=_useState4[0],setHello=_useState4[1];var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var handleChange=function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"\".concat(URL,\"/users/login\"),{email:form.email,password:form.password});case 4:res=_context.sent;setMessage(res.data.message);if(res.data.ok){document.body.style.overflow=\"hidden\";setHello(/*#__PURE__*/_jsx(Hello,{}));document.body.style.overflow=\"scroll\";setTimeout(function(){login(res.data.token);},1500);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){setTimeout(function(){setMessage(\"\");},2000);},[message]);return/*#__PURE__*/_jsxs(\"div\",{children:[hello,/*#__PURE__*/_jsxs(\"form\",{onChange:handleChange,onSubmit:handleSubmit,className:\"form_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log in\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email or Phone number\",name:\"email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\"}),/*#__PURE__*/_jsx(\"h4\",{children:message}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Still without an account?\",/*#__PURE__*/_jsx(Link,{className:\"formlink\",exact:\"true\",to:\"/register\",children:\"Suscribe now Free!\"})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","URL","Hello","Link","InitialForm","login","message","setMessage","hello","setHello","email","password","form","setForm","handleChange","e","target","name","value","handleSubmit","preventDefault","post","res","data","ok","document","body","style","overflow","setTimeout","token","console","log"],"sources":["/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/src/views/InitialForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { URL } from \"../config\";\nimport Hello from \"./Hello\";\nimport { Link } from \"react-router-dom\";\n\nexport default function InitialForm({login}) {\n  const [message, setMessage] = useState(\"\");\n  const[hello,setHello]=useState('');\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await axios.post(`${URL}/users/login`, {\n        email: form.email,\n        password: form.password,\n      });\n      setMessage(res.data.message);\n      if (res.data.ok) {\n        document.body.style.overflow = \"hidden\";\n        setHello(<Hello/>);\n        document.body.style.overflow = \"scroll\";\n        setTimeout(() => {\n          login(res.data.token);\n        }, 1500);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  useEffect(() => {\n    setTimeout(() => {\n      setMessage(\"\");\n    }, 2000);\n  }, [message]);\n  return (\n    <div>\n        {hello}\n      <form\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n        className=\"form_container\"\n      >\n        <h1>Log in</h1>\n        <input type=\"email\" placeholder=\"Email or Phone number\" name=\"email\" />\n        <input type=\"password\" placeholder=\"Password\" name=\"password\" />\n        <h4>{message}</h4>\n        <button>Login</button>\n        <p>\n            Still without an account?\n        <Link className=\"formlink\" exact='true' to='/register' >Suscribe now Free!</Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"mxBAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,GAAG,KAAQ,WAAW,CAC/B,MAAOC,MAAK,KAAM,SAAS,CAC3B,OAASC,IAAI,KAAQ,kBAAkB,CAAC,wFAExC,cAAe,SAASC,YAAW,MAAU,IAARC,MAAK,MAALA,KAAK,CACxC,cAA8BP,QAAQ,CAAC,EAAE,CAAC,wCAAnCQ,OAAO,eAAEC,UAAU,eAC1B,eAAsBT,QAAQ,CAAC,EAAE,CAAC,yCAA5BU,KAAK,eAACC,QAAQ,eACpB,eAAwBX,QAAQ,CAAC,CAC/BY,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACZ,CAAC,CAAC,yCAHKC,IAAI,eAAEC,OAAO,eAIpB,GAAMC,aAAY,CAAG,QAAfA,aAAY,CAAIC,CAAC,CAAK,CAC1BF,OAAO,gCAAMD,IAAI,wBAAGG,CAAC,CAACC,MAAM,CAACC,IAAI,CAAGF,CAAC,CAACC,MAAM,CAACE,KAAK,GAAG,CACvD,CAAC,CACD,GAAMC,aAAY,6FAAG,iBAAOJ,CAAC,4HAC3BA,CAAC,CAACK,cAAc,EAAE,CAAC,sCAECpB,MAAK,CAACqB,IAAI,WAAIpB,GAAG,iBAAgB,CACjDS,KAAK,CAAEE,IAAI,CAACF,KAAK,CACjBC,QAAQ,CAAEC,IAAI,CAACD,QACjB,CAAC,CAAC,QAHIW,GAAG,eAITf,UAAU,CAACe,GAAG,CAACC,IAAI,CAACjB,OAAO,CAAC,CAC5B,GAAIgB,GAAG,CAACC,IAAI,CAACC,EAAE,CAAE,CACfC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAG,QAAQ,CACvCnB,QAAQ,cAAC,KAAC,KAAK,IAAE,CAAC,CAClBgB,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAQ,CAAG,QAAQ,CACvCC,UAAU,CAAC,UAAM,CACfxB,KAAK,CAACiB,GAAG,CAACC,IAAI,CAACO,KAAK,CAAC,CACvB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,+EAEDC,OAAO,CAACC,GAAG,aAAK,CAAC,oEAEpB,kBAnBKb,aAAY,6CAmBjB,CACDpB,SAAS,CAAC,UAAM,CACd8B,UAAU,CAAC,UAAM,CACftB,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAAE,IAAI,CAAC,CACV,CAAC,CAAE,CAACD,OAAO,CAAC,CAAC,CACb,mBACE,uBACKE,KAAK,cACR,cACE,QAAQ,CAAEM,YAAa,CACvB,QAAQ,CAAEK,YAAa,CACvB,SAAS,CAAC,gBAAgB,wBAE1B,8BAAe,cACf,cAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,uBAAuB,CAAC,IAAI,CAAC,OAAO,EAAG,cACvE,cAAO,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAG,cAChE,oBAAKb,OAAO,EAAM,cAClB,iCAAsB,cACtB,8DAEA,KAAC,IAAI,EAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,WAAW,gCAA2B,GAC7E,GACC,GACH,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}