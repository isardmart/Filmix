{"ast":null,"code":"import _regeneratorRuntime from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{URL}from\"../config\";import Usernavbar from\"../components/Usernavbar\";import DisplayMovie from\"./DisplayMovie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movies=function Movies(_ref){var logout=_ref.logout;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isReady=_useState4[0],setIsReady=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState({title:\"\"}),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),media=_useState10[0],setMedia=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),media2=_useState12[0],setMedia2=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),imdbid=_useState14[0],setImdbid=_useState14[1];var handleChange=function handleChange(e){return setSearch(_objectSpread(_objectSpread({},search),{},{title:e.target.value}));};var handleSubmit=function handleSubmit(e){e.preventDefault();setLoading(true);findMovie(search.title);};var findMovie=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(title){var url,res,_res$data$media,_Error,Type,imdbID;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"\".concat(URL,\"/media/search\");_context.prev=1;_context.next=4;return axios.post(url,{title:title});case 4:res=_context.sent;_res$data$media=res.data.media,_Error=_res$data$media.Error,Type=_res$data$media.Type,imdbID=_res$data$media.imdbID;if(!(Type!==\"movie\")){_context.next=12;break;}if(Type){_context.next=10;break;}setError(\"Seems that your movie doesn't exist\");return _context.abrupt(\"return\",setIsReady(true));case 10:setError(\"Seems that you're searching a \".concat(Type));return _context.abrupt(\"return\",setIsReady(true));case 12:setMedia(res.data.media);setImdbid(imdbID);setError(_Error);setIsReady(true);_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);setIsReady(true);case 22:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function findMovie(_x){return _ref2.apply(this,arguments);};}();var findPoster=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(imdbid){var url2,res2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url2=\"\".concat(URL,\"/media2/search\");_context2.prev=1;_context2.next=4;return axios.post(url2,{imdbid:imdbid});case 4:res2=_context2.sent;setMedia2(res2.data.media.movie_results[0]);_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function findPoster(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){findPoster(imdbid);},[imdbid]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Usernavbar,{logout:logout}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,value:search.title}),/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})]}),isReady?!error?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DisplayMovie,{media:media,media2:media2})}):/*#__PURE__*/_jsx(\"h1\",{children:error}):loading?/*#__PURE__*/_jsx(\"img\",{src:\"https://www.organizedthemes.com/wp-content/plugins/remind-me/js/loading.gif\",alt:\"loading\"}):null]});};export default Movies;","map":{"version":3,"names":["React","useEffect","useState","axios","URL","Usernavbar","DisplayMovie","Movies","logout","error","setError","isReady","setIsReady","loading","setLoading","title","search","setSearch","media","setMedia","media2","setMedia2","imdbid","setImdbid","handleChange","e","target","value","handleSubmit","preventDefault","findMovie","url","post","res","data","Error","Type","imdbID","message","findPoster","url2","res2","movie_results"],"sources":["/Users/tonigaligimeno/Documents/BCS/Full-Stack Web App/Filmix/client/src/views/Movies.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { URL } from \"../config\";\nimport Usernavbar from \"../components/Usernavbar\";\nimport DisplayMovie from \"./DisplayMovie\";\n\nconst Movies = ({ logout }) => {\n  const [error, setError] = useState(\"\");\n  const [isReady, setIsReady] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [search, setSearch] = useState({ title: \"\" });\n  const [media, setMedia] = useState({});\n  const [media2, setMedia2] = useState({});\n  const [imdbid, setImdbid] = useState(\"\");\n\n  const handleChange = (e) => setSearch({ ...search, title: e.target.value });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    findMovie(search.title);\n  };\n  const findMovie = async (title) => {\n    let url = `${URL}/media/search`;\n    try {\n      const res = await axios.post(url, { title });\n      let { Error, Type, imdbID } = res.data.media;\n      if (Type !== \"movie\") {\n        if (!Type) {\n          setError(`Seems that your movie doesn't exist`);\n          return setIsReady(true);\n        }\n        setError(`Seems that you're searching a ${Type}`);\n        return setIsReady(true);\n      }\n      setMedia(res.data.media);\n      setImdbid(imdbID);\n      setError(Error);\n      setIsReady(true);\n    } catch (error) {\n      setError(error.message);\n      setIsReady(true);\n    }\n  };\n  const findPoster = async (imdbid) => {\n    let url2 = `${URL}/media2/search`;\n    try {\n      const res2 = await axios.post(url2, { imdbid });\n      setMedia2(res2.data.media.movie_results[0]);\n    } catch (error) {}\n  };\n  useEffect(() => {\n    findPoster(imdbid);\n  }, [imdbid]);\n\n  return (\n    <div>\n      <Usernavbar logout={logout} />\n      <form onSubmit={handleSubmit}>\n        <input onChange={handleChange} value={search.title} />\n        <button>Submit</button>\n      </form>\n      {isReady ? (\n        !error ? (\n          <div>\n            <DisplayMovie media={media} media2={media2} />\n          </div>\n        ) : (\n          <h1>{error}</h1>\n        )\n      ) : loading ? (\n        <img\n          src=\"https://www.organizedthemes.com/wp-content/plugins/remind-me/js/loading.gif\"\n          alt=\"loading\"\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default Movies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}